<turbo-frame id="users">
  <table class="min-w-full divide-y divide-gray-300 mb-48">
    <thead>
    <tr class="divide-x divide-gray-200">
      <th scope="col" class="py-3.5 pl-4 pr-4 text-left text-sm font-semibold text-gray-900 sm:pl-0">Name
      </th>
      <th scope="col" class="px-4 py-3.5 text-left text-sm font-semibold text-gray-900">Title</th>
      <th scope="col" class="px-4 py-3.5 text-left text-sm font-semibold text-gray-900">Email</th>
      <th scope="col" class="py-3.5 pl-4 pr-4 text-left text-sm font-semibold text-gray-900 sm:pr-0">Role
      </th>
    </tr>
    </thead>
    <tbody class="divide-y divide-gray-200 bg-white">
    <% users.forEach((user, i) => { %>
      <tr class="divide-x divide-gray-200" data-controller="popup">
        <td class="whitespace-nowrap py-4 pl-4 pr-4 text-sm font-medium text-gray-900 sm:pl-0">
          <div class="flex gap-2 items-center relative"><%= user.name %>
            <a data-action="click->popup#showPopup"
               href="/api/hotwire/popup_stimulus/user?id=<%= user.id %>"
               data-turbo-frame="user-detail-frame-<%= user.id %>">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                   stroke="currentColor" class="size-6 hover:cursor-pointer">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path>
              </svg>
            </a>
            <div data-js="user-detail-popup"
                 data-popup-target="popupWindow"
                 class="hidden absolute z-10 -top-12 left-48 w-72 px-4 pt-1 pb-8 bg-white border shadow-lg rounded-md border-gray-400">
              <div class="flex justify-between mb-4 border-b border-gray-200">
                <div></div>
                <div class="p-1 text-sm w-auto hover:cursor-pointer translate-x-2"
                     data-action="click->popup#hideAllPopups">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-orange-600">
                    <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z" clip-rule="evenodd" />
                  </svg>
                </div>
              </div>
              <turbo-frame id="user-detail-frame-<%= user.id %>">
                <div>
                  <img src="/images/rocket.gif" alt="loader" class="m-auto w-16 h-16"/>
                </div>
              </turbo-frame>
            </div>
          </div>
        </td>
        <td class="whitespace-nowrap p-4 text-sm text-gray-500"><%= user.title %></td>
        <td class="whitespace-nowrap p-4 text-sm text-gray-500"><%= user.email %></td>
        <td class="whitespace-nowrap py-4 pl-4 pr-4 text-sm text-gray-500 sm:pr-0"><%= user.role %></td>
      </tr>
    <% }) %>
    </tbody>
  </table>
</turbo-frame>
